import{x as U,y as G,D as O,k as S,p as w,o as s,c,b as m,t as L,h as _,F as A,g as j,Y as q,d as V,H as J,e as a,a as t,w as M,f as R,n as K,u as d,N as W,_ as Y,$ as D,i as Q,l as X,A as Z,O as z,P as ee}from"./app-00f1f0af.js";/* empty css                        */import{S as F}from"./sweetalert2-c9babbd4.js";const te={viewBox:"0 0 8 2",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se=m("path",{d:"M2.24 1c0 .556-.445 1-1 1-.556 0-1-.444-1-1s.444-1 1-1c.555 0 1 .444 1 1zm5.333 0c0 .556-.444 1-1 1-.555 0-1-.444-1-1s.445-1 1-1c.556 0 1 .444 1 1z",fill:"#BBB"},null,-1);function oe(e,o){return s(),c("svg",te,[se])}var H=O({name:"VPage",components:{IconPaginationDots:oe},props:{page:{type:Number,default:null},current:{type:Number,default:0},activeColor:{type:String,default:"#DCEDFF"}},emits:["update"],setup(e,{emit:o}){const y=S(()=>e.page===e.current);function k(){o("update",e.page)}return{isActive:y,clickHandler:k}}});const ne=q();U("data-v-060ca318");const le={key:0,class:"DotsHolder"};G();const ae=ne((e,o,y,k,g,v)=>{const h=w("icon-pagination-dots");return s(),c("li",null,[e.page===null?(s(),c("span",le,[m(h,{class:"Dots"})])):(s(),c("button",{key:1,class:["Page",{"Page-active":e.isActive}],type:"button","aria-label":`Go to page ${e.page}`,style:`background-color: ${e.isActive?e.activeColor:"transparent"};`,onClick:o[1]||(o[1]=(...i)=>e.clickHandler&&e.clickHandler(...i))},L(e.page),15,["aria-label"]))])});H.render=ae;H.__scopeId="data-v-060ca318";H.__file="src/components/atoms/VPage.vue";const ie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},re=m("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6 1.41-1.41M6 6h2v12H6V6z"},null,-1);function de(e,o){return s(),c("svg",ie,[re])}const ce={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},ue=m("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6-1.41 1.41M16 6h2v12h-2V6z"},null,-1);function me(e,o){return s(),c("svg",ce,[ue])}const ge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},he=m("path",{d:"M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.42z"},null,-1);function ve(e,o){return s(),c("svg",ge,[he])}const pe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},fe=m("path",{d:"M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"},null,-1);function _e(e,o){return s(),c("svg",pe,[fe])}var I=O({name:"VPagination",components:{IconPageFirst:de,IconChevronLeft:ve,IconChevronRight:_e,IconPageLast:me,VPage:H},props:{pages:{type:Number,default:0},rangeSize:{type:Number,default:1},modelValue:{type:Number,default:0},activeColor:{type:String,default:"#DCEDFF"},hideFirstButton:{type:Boolean,default:!1},hideLastButton:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:o}){const y=S(()=>{const u=[],p=5+e.rangeSize*2;let f=e.pages<=p?1:e.modelValue-e.rangeSize,b=e.pages<=p?e.pages:e.modelValue+e.rangeSize;if(b=b>e.pages?e.pages:b,f=f<1?1:f,e.pages>p){const C=f-1<3,N=e.pages-b<3;if(C){b=p-2;for(let n=1;n<f;n++)u.push(n)}else u.push(1),u.push(null);if(N){f=e.pages-(p-3);for(let n=f;n<=e.pages;n++)u.push(n)}else{for(let n=f;n<=b;n++)u.push(n);u.push(null),u.push(e.pages)}}else for(let C=f;C<=b;C++)u.push(C);return u});function k(u){o("update:modelValue",u)}const g=S(()=>e.modelValue>1),v=S(()=>e.modelValue<e.pages);function h(){g.value&&o("update:modelValue",1)}function i(){g.value&&o("update:modelValue",e.modelValue-1)}function B(){v.value&&o("update:modelValue",e.pages)}function P(){v.value&&o("update:modelValue",e.modelValue+1)}return{pagination:y,updatePageHandler:k,isPrevControlsActive:g,isNextControlsActive:v,goToFirst:h,goToLast:B,goToPrev:i,goToNext:P}}});const ye=q();U("data-v-2a30deb0");const be={class:"Pagination"},xe={key:0,class:"PaginationControl"},we={class:"PaginationControl"},ke={class:"PaginationControl"},Ce={key:1,class:"PaginationControl"};G();const $e=ye((e,o,y,k,g,v)=>{const h=w("icon-page-first"),i=w("icon-chevron-left"),B=w("v-page"),P=w("icon-chevron-right"),u=w("icon-page-last");return s(),c("ul",be,[e.hideFirstButton?_("v-if",!0):(s(),c("li",xe,[m(h,{class:["Control",{"Control-active":e.isPrevControlsActive}],onClick:e.goToFirst},null,8,["class","onClick"])])),m("li",we,[m(i,{class:["Control",{"Control-active":e.isPrevControlsActive}],onClick:e.goToPrev},null,8,["class","onClick"])]),(s(!0),c(A,null,j(e.pagination,p=>(s(),c(B,{key:`pagination-page-${p}`,page:p,current:e.modelValue,"active-color":e.activeColor,onUpdate:e.updatePageHandler},null,8,["page","current","active-color","onUpdate"]))),128)),m("li",ke,[m(P,{class:["Control",{"Control-active":e.isNextControlsActive}],onClick:e.goToNext},null,8,["class","onClick"])]),e.hideLastButton?_("v-if",!0):(s(),c("li",Ce,[m(u,{class:["Control",{"Control-active":e.isNextControlsActive}],onClick:e.goToLast},null,8,["class","onClick"])]))])});I.render=$e;I.__scopeId="data-v-2a30deb0";I.__file="src/components/VPagination.vue";const Ae={class:"border rounded-md py-3 px-4 bg-white"},Be={class:"mx-auto md:mx-4 sm:x-6 lg:mx-8"},Pe={class:"sm:flex sm:items-center"},Le={class:"sm:flex-auto"},Ve={class:"text-base font-semibold leading-6 text-gray-900"},Me={class:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},ze={class:"mt-8 flow-root overflow-hidden"},Se={class:"mx-auto sm:x-6 lg:mx-8"},je={class:"w-full text-left"},He={class:"bg-white border-b"},Ie={class:"flex justify-center items-center gap-x-1 group"},Ne=t("path",{d:"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"},null,-1),Te=[Ne],De=t("th",{scope:"col",class:"relative py-3.5 pl-3 w-36"},[t("span",null,"Действия")],-1),Fe={class:""},Ee=["innerHTML"],Re=["innerHTML"],Ue={key:1,class:"relative py-4 pr-3 text-sm font-medium text-gray-900"},Ge={class:"relative py-4 pl-3 text-right text-sm font-medium flex gap-y-1"},Oe=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),qe=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),Je=["onClick"],Ke=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),We=[Ke],Ye={key:0,class:"text-center my-2 text-sm text-gray-700"},Qe={class:"flex justify-end mt-3"},Xe={key:0,class:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50"},Ze={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},et=["onSubmit"],tt={key:0},st=t("label",{for:"name",class:"text-gray-700 text-sm"},"Название",-1),ot={key:1},nt=t("label",{for:"name",class:"text-gray-700 text-sm"},"Изоброжение",-1),lt={for:"image",class:"cursor-pointer"},at={key:0,class:"relative group"},it=["src"],rt=t("div",{class:"group-hover:flex hidden absolute right-0 left-0 bottom-0 top-0 bg-black bg-opacity-50 z-20 items-center justify-center rounded-lg"},[t("span",{class:"inline-block border-2 rounded-lg px-4 py-3 font-bold text-sm text-white"},"Изменить")],-1),dt={key:1,class:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10"},ct=ee('<div class="text-center"><svg class="mx-auto h-12 w-12 text-gray-300" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z" clip-rule="evenodd"></path></svg><div class="mt-4 flex text-sm leading-6 text-[#16A34A] tex"><p class="pl-1"> Upload a file. PNG, JPG, GIF up to 10MB </p></div></div>',1),ut=[ct],mt={key:0},gt={class:"mt-5 sm:mt-6 flex justify-end gap-x-3"},ht=t("button",{type:"submit",class:"inline-flex justify-center rounded-md bg-[#16A34A] px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#16A34A]"}," Сохранить ",-1),vt={key:1,class:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50"},pt={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},ft={class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},_t=t("div",{class:"mx-auto flex h-12 w-12 items-center justify-center rounded-full"},[t("div",{class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[t("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})])])],-1),yt={class:"mt-3 text-center sm:mt-5"},bt=t("h3",{class:"text-base font-semibold leading-6 text-gray-900",id:"modal-title"}," Вы уверены? ",-1),xt={class:"mt-2"},wt={class:"text-sm text-gray-500"},kt={class:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3"},Bt={__name:"CRUD",props:{items:Object,title:String,meta:String,name:String,showAddButton:{type:Boolean,default:!0},showCustomAddButton:{type:Boolean,default:!1},showCustomEditButton:{type:Boolean,default:!1},contentType:{type:String,default:"text"},actions:{type:Object,default:{removeButton:!0,editButton:!0}},fields:{type:Array,default:[{label:"Название",value:"name"}]}},setup(e){const o=e;let y=o.items.current_page,k=o.items.last_page,g=V(!1),v=V(!1),h=V({sort_by:"",sort_dir:""}),i=V({name:""});const B=n=>{z.visit(route(`${o.name}.index`,{page:n}))},P=n=>{i.value=n,g.value=!0},u=()=>{i.value={name:"",image:""},g.value=!0},p=()=>{i.value={name:"",image:""},g.value=!1,v.value=!1},f=()=>{"id"in i.value?axios.put(route(`${o.name}.update`,i.value.id),i.value).then(n=>{p(),z.visit("",{replace:!0}),F.fire({title:`${o.meta} успешно обновлен`,timer:3e3,timerProgressBar:!0,showConfirmButton:!1,icon:"success",toast:!0,position:"top-end"})}):axios.post(route(`${o.name}.store`),i.value).then(n=>{p(),z.visit("",{replace:!0}),F.fire({title:`${o.meta} успешно добавлен`,timer:3e3,timerProgressBar:!0,showConfirmButton:!1,icon:"success",toast:!0,position:"top-end"})})},b=n=>{axios.delete(route(`${o.name}.destroy`,n.id)).then(r=>{z.visit("",{replace:!0}),F.fire({title:`${o.meta} успешно удален`,timer:3e3,timerProgressBar:!0,showConfirmButton:!1,icon:"success",toast:!0,position:"top-end"})})},C=n=>{p(),i.value=n,v.value=!0},N=n=>{var r=n.target;if(r.files&&r.files[0]){var x=new FileReader;x.onload=T=>{i.value.image=T.target.result},x.readAsDataURL(r.files[0])}};return J(()=>{const n=new URLSearchParams(window.location.search),r=n.get("sort_by"),x=n.get("sort_dir");h.value.sort_by=r??"id",h.value.sort_dir=x??"asc"}),(n,r)=>{var E;const x=w("Link"),T=w("buttom");return s(),a(A,null,[t("div",Ae,[t("div",Be,[t("div",Pe,[t("div",Le,[t("h1",Ve,L(o.title),1)]),t("div",Me,[o.showAddButton?(s(),a("button",{key:0,type:"button",onClick:u,class:"block rounded-md bg-[#16A34A] px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-gray-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#16A34A]"}," Добавить ")):e.showCustomAddButton?(s(),c(x,{key:1,class:"block rounded-md bg-[#16A34A] px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-gray-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#16A34A]",href:n.route(`${o.name}.create`)},{default:M(()=>[R(" Добавить ")]),_:1},8,["href"])):_("",!0)])])]),t("div",ze,[t("div",Se,[t("table",je,[t("thead",He,[t("tr",null,[(s(!0),a(A,null,j(e.fields,l=>(s(),a("th",{key:l.value,scope:"col",class:"relative isolate py-3.5 pr-3 text-left text-sm font-semibold text-gray-900"},[t("div",Ie,[(s(),a("svg",{class:K(["group-hover:opacity-100 opacity-0 transition-all duration-200",[d(h).sort_by==l.value&&d(h).sort_dir=="asc"?"rotate-180 mb-2":"mt-1",{"!opacity-100":d(h).sort_by==l.value}]]),xmlns:"http://www.w3.org/2000/svg",height:"16",width:"10",viewBox:"0 0 320 512"},Te,2)),m(x,{class:"block",href:n.route(n.route().current(),{sort_by:l.value,sort_dir:d(h).sort_by==l.value&&d(h).sort_dir=="asc"?"desc":"asc"})},{default:M(()=>[R(L(l.label),1)]),_:2},1032,["href"])])]))),128)),De])]),t("tbody",Fe,[(s(!0),a(A,null,j(o.items.data,l=>(s(),a("tr",{key:l.id,class:"border-b"},[o.contentType==="text"?(s(!0),a(A,{key:0},j(e.fields,$=>(s(),a("td",{key:$.value,class:"relative py-4 pr-3 text-sm font-medium text-gray-900"},["items"in $?(s(),a("span",{key:0,innerHTML:$.items[l[$.value]]},null,8,Ee)):(s(),a("span",{key:1,innerHTML:l[$.value]},null,8,Re))]))),128)):(s(),a("td",Ue,[t("div",{class:"bg-cover w-24 h-12 rounded-md shadow-md",style:W({backgroundImage:`url(${l.image})`})},null,4)])),t("td",Ge,[o.actions.editButton?(s(),a(A,{key:0},[e.showCustomEditButton?e.showCustomEditButton?(s(),c(x,{key:1,href:n.route(`${o.name}.edit`,l.id),class:"text-[#16A34A] hover:text-indigo-900"},{default:M(()=>[qe]),_:2},1032,["href"])):_("",!0):(s(),c(T,{key:0,type:"button",onClick:$=>P(l),class:"text-[#16A34A] hover:text-indigo-900"},{default:M(()=>[Oe]),_:2},1032,["onClick"]))],64)):_("",!0),d(Y)().url.startsWith("/dashboard/admins")&&l.role==="admin"?_("",!0):(s(),a(A,{key:1},[o.actions.removeButton&&n.$page.props.auth.user.role==="admin"?(s(),a("button",{key:0,onClick:$=>C(l),type:"button",class:"text-red-600 hover:text-red-900"},We,8,Je)):_("",!0)],64))])]))),128))])]),o.items.total==0?(s(),a("div",Ye," Пусто ")):_("",!0),t("nav",Qe,[m(d(I),{modelValue:d(y),"onUpdate:modelValue":[r[0]||(r[0]=l=>D(y)?y.value=l:y=l),B],pages:d(k)},null,8,["modelValue","pages"])])])])]),d(g)?(s(),a("div",Xe,[t("div",Ze,[t("form",{onSubmit:Q(f,["prevent"]),class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-sm sm:p-6"},[t("div",null,[o.contentType=="text"?(s(),a("div",tt,[st,X(t("input",{id:"name","onUpdate:modelValue":r[1]||(r[1]=l=>d(i).name=l),type:"text",required:"",minlength:"2",maxlength:"255",placeholder:"Введите название",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-[#16A34A] sm:text-sm sm:leading-6"},null,512),[[Z,d(i).name]])])):(s(),a("div",ot,[nt,t("label",lt,[d(i).image?(s(),a("div",at,[t("img",{class:"object-cover h-[170px] rounded-lg border border-dashed border-gray-900/25 w-full",src:d(i).image,alt:""},null,8,it),rt])):(s(),a("div",dt,ut))]),t("input",{id:"image",class:"w-[1px] h-[1px]",type:"file",required:"",accept:"image/png,image/jpeg,image/jpg,image/gif",or:"",onChange:N},null,32)]))]),"admin"in d(i)?(s(),a("div",mt," Последнее изменение: "+L((E=d(i).admin)==null?void 0:E.name),1)):_("",!0),t("div",gt,[t("button",{type:"button",class:"inline-flex justify-center rounded-md bg-gray-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#16A34A]",onClick:r[2]||(r[2]=l=>D(g)?g.value=!1:g=!1)}," Отмена "),ht])],40,et)])])):_("",!0),d(v)?(s(),a("div",vt,[t("div",pt,[t("div",ft,[t("div",null,[_t,t("div",yt,[bt,t("div",xt,[t("p",wt," Вы уверены, что хотите удалить "+L(o.meta)+"? Все следующие объекты и связанные с ними элементы будут удалены. ",1)])])]),t("div",kt,[t("button",{type:"button",class:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#16A34A] sm:col-start-2",onClick:r[3]||(r[3]=l=>b(d(i)))}," Удалить "),t("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0",onClick:r[4]||(r[4]=l=>D(v)?v.value=!1:v=!1)}," Отмена ")])])])])):_("",!0)],64)}}};export{Bt as _};
